isbns = [
    {
        "9782367321400": {
            "prix": 12.5,
            "titre": "Vasco de Gama, Le premier voyage",
            "auteur_nom": "Álvaro Velho",
            "genre": "Gastronomia",
            "langue": "FR",
        }
    },
    {
        "9782847431407": {
            "prix": 18.0,
            "titre": "Le Corsaire de Rio",
            "auteur_nom": "Antônio Torres",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9782847431063": {
            "prix": 15.0,
            "titre": "Mon cher cannibale",
            "auteur_nom": "Antônio Torres",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9782367321226": {
            "prix": 22.0,
            "titre": "Mon oncle le jaguar et autres histoires",
            "auteur_nom": "João Guimarães Rosa",
            "genre": "Literaturas",
            "langue": "FR",
        }
    },
    {
        "9781521470879": {
            "prix": 10.0,
            "titre": "Fantasmas de um escritor em Paris",
            "auteur_nom": "Marco Guimarães",
            "genre": "Ensino",
            "langue": "PT",
        }
    },
    {
        "9781717984692": {
            "prix": 7.0,
            "titre": "O portal",
            "auteur_nom": "Marco Guimarães",
            "genre": "Ensino",
            "langue": "PT",
        }
    },
    {
        "9782367320779": {
            "prix": 17.0,
            "titre": "La meilleure part, Voyage au Brésil",
            "auteur_nom": "Patrick Straumann",
            "genre": "Gastronomia",
            "langue": "FR",
        }
    },
    {
        "9782367321271": {
            "prix": 14.5,
            "titre": "La découverte du Japon",
            "auteur_nom": "Xavier de Castro",
            "genre": "Gastronomia",
            "langue": "PT",
        }
    },
    {
        "9782367321257": {
            "prix": 14.5,
            "titre": "Le Voyage de Magellan",
            "auteur_nom": "Xavier de Castro",
            "genre": "Gastronomia",
            "langue": "FR",
        }
    },
    {
        "9782864246640": {
            "prix": 23.0,
            "titre": "La ronde de nuit",
            "auteur_nom": "Agustina Bessa Luis",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "595959559": {
            "prix": 62.0,
            "titre": "Amadeo de Souza Cardoso",
            "auteur_nom": "António Cardoso e outros",
            "genre": "Catálogo",
            "langue": "PT",
        }
    },
    {
        "9782020348966": {
            "prix": 6.5,
            "titre": "Mémoire déléphant",
            "auteur_nom": "António Lobo Antunes",
            "genre": "Memórias",
            "langue": "FR",
        }
    },
    {
        "9781849049979": {
            "prix": 19.0,
            "titre": "Queen of the Sea",
            "auteur_nom": "Barry Hatton",
            "genre": "Gastronomia",
            "langue": "EN",
        }
    },
    {
        "9782367320823": {
            "prix": 22.0,
            "titre": "Le livre des nostalgies",
            "auteur_nom": "Bernardim Ribeiro",
            "genre": "Ensino",
            "langue": "PT",
        }
    },
    {
        "9782367321462": {
            "prix": 12.0,
            "titre": "Récits de la prison de Porto",
            "auteur_nom": "Camilo Castelo Branco",
            "genre": "Memórias",
            "langue": "FR",
        }
    },
    {
        "9782915540024": {
            "prix": 10.0,
            "titre": "La mort dans lavion et autres poèmes",
            "auteur_nom": "Carlos Drummond de Andrade",
            "genre": "Poesia BR",
            "langue": "PT/FR",
        }
    },
    {
        "9782367321608": {
            "prix": 21.0,
            "titre": "Histoire de lAngola",
            "auteur_nom": "David Birmingham",
            "genre": "Gastronomia",
            "langue": "FR",
        }
    },
    {
        "9782367321127": {
            "prix": 25.0,
            "titre": "Les Maia",
            "auteur_nom": "Eça de Queirós",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9781847247940": {
            "prix": 22.0,
            "titre": "Wrath of God",
            "auteur_nom": "Edward Paice",
            "genre": "Gastronomia",
            "langue": "EN",
        }
    },
    {
        "5601072406254": {
            "prix": 8.0,
            "titre": "Uma noite em Lisboa",
            "auteur_nom": "Erich Maria Remarque",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9782868696250": {
            "prix": 23.0,
            "titre": "Cette nuit jai rêvé de Bruegel",
            "auteur_nom": "Fernanda Botelho",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9782367321363": {
            "prix": 12.0,
            "titre": "Anthologie essentielle",
            "auteur_nom": "Fernando Pessoa",
            "genre": "Poesia",
            "langue": "PT/FR",
        }
    },
    {
        "9782367821951": {
            "prix": 12.0,
            "titre": "Bureau de tabac",
            "auteur_nom": "Fernando Pessoa",
            "genre": "Poesia",
            "langue": "PT/FR",
        }
    },
    {
        "9782267019551": {
            "prix": 9.0,
            "titre": "Le chemin du serpent",
            "auteur_nom": "Fernando Pessoa",
            "genre": "Ensaio",
            "langue": "FR",
        }
    },
    {
        "9782743639341": {
            "prix": 7.0,
            "titre": "Lettres à la fiancée",
            "auteur_nom": "Fernando Pessoa",
            "genre": "Cartas",
            "langue": "FR",
        }
    },
    {
        "9782367321707": {
            "prix": 12.0,
            "titre": "Lisbonne revisitée",
            "auteur_nom": "Fernando Pessoa",
            "genre": "Poesia",
            "langue": "PT/FR",
        }
    },
    {
        "9782906462168": {
            "titre": "Camões",
            "auteur_nom": "Georges Le Gentil",
            "genre": "Estudos",
            "langue": "FR",
        }
    },
    {
        "55555": {
            "prix": 20.0,
            "titre": "O olhar de compromisso",
            "auteur_nom": "Gérard Bloncourt",
            "genre": "Fotografia",
            "langue": "PT/FR",
        }
    },
    {
        "9782906462342": {
            "prix": 5.0,
            "titre": "Auto da alma",
            "auteur_nom": "Gil Vicente",
            "genre": "Teatro",
            "langue": "PT/FR",
        }
    },
    {
        "9782906462359": {
            "prix": 5.0,
            "titre": "Farsa dos almocreves",
            "auteur_nom": "Gil Vicente",
            "genre": "Teatro",
            "langue": "PT/FR",
        }
    },
    {
        "9782906462335": {
            "prix": 5.0,
            "titre": "Le triomphe de lhiver & du printemps",
            "auteur_nom": "Gil Vicente",
            "genre": "Teatro",
            "langue": "PT/FR",
        }
    },
    {
        "9999666": {
            "prix": 35.0,
            "titre": "Corpus",
            "auteur_nom": "Helena Almeida",
            "genre": "Fotografia",
            "langue": "FR",
        }
    },
    {
        "5601072496293": {
            "prix": 20.0,
            "titre": "Dário de uma viagem a Lisboa",
            "auteur_nom": "Henry Fielding",
            "genre": "Viagens",
            "langue": "PT",
        }
    },
    {
        "9782367320694": {
            "prix": 20.0,
            "titre": "Les cent pas",
            "auteur_nom": "Herberto Helder",
            "genre": "Crónicas",
            "langue": "FR",
        }
    },
    {
        "9782367321882": {
            "prix": 14.0,
            "titre": "Idées reçues sur les grandes découvertes",
            "auteur_nom": "Jean-Paul Duviols",
            "genre": "Gastronomia",
            "langue": "FR",
        }
    },
    {
        "9782738116666": {
            "prix": 24.9,
            "titre": "Tremblement de terre de Lisbonne (Le)",
            "auteur_nom": "Jean-Paul Poirier",
            "genre": "Gastronomia",
            "langue": "FR",
        }
    },
    {
        "552125151": {
            "prix": 22.0,
            "titre": "De Leiria à Gabela: Memórias de um soldado",
            "auteur_nom": "João Torres Lima",
            "genre": "Gastronomia",
            "langue": "PT",
        }
    },
    {
        "0022554": {
            "prix": 15.0,
            "titre": "Terras de Monte Largo",
            "auteur_nom": "José de Andrade",
            "genre": "Fotografia",
            "langue": "PT/FR",
        }
    },
    {
        "9782729116484": {
            "prix": 30.0,
            "titre": "Le Nomadisme Transculturel",
            "auteur_nom": "José de Guimarães",
            "genre": "Arte",
            "langue": "FR",
        }
    },
    {
        "9782367321165": {
            "prix": 29.0,
            "titre": "Le voyage des plantes & les grandes découvertes (XVe-XVIIe siècles)",
            "auteur_nom": "José Eduardo Mendes Ferrão",
            "genre": "Botânica",
            "langue": "FR",
        }
    },
    {
        "9782266272926": {
            "prix": 10.0,
            "titre": "Furie divine",
            "auteur_nom": "José Rodrigues Dos Santos",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9782266254298": {
            "prix": 10.0,
            "titre": "La clé de Salomon",
            "auteur_nom": "José Rodrigues dos Santos",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9782266245487": {
            "prix": 10.0,
            "titre": "Lultime secret du Christ",
            "auteur_nom": "José Rodrigues dos Santos",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9782020368049": {
            "prix": 7.5,
            "titre": "Histoire du Siège de Lisbonne",
            "auteur_nom": "José Saramago",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9782757845486": {
            "prix": 7.7,
            "titre": "La Lucarne",
            "auteur_nom": "José Saramago",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9781784871789": {
            "prix": 12.0,
            "titre": "Death at intervals",
            "auteur_nom": "José Saramago",
            "genre": "Ensino",
            "langue": "EN",
        }
    },
    {
        "9782367321561": {
            "prix": 13.8,
            "titre": "Le cousin Bazilio",
            "auteur_nom": "Eça de Queirós",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9996542": {
            "prix": 17.0,
            "titre": "Outro Santo, Outro Infante",
            "auteur_nom": "Julieta Marques",
            "genre": "Gastronomia",
            "langue": "PT",
        }
    },
    {
        "9782367321752": {
            "prix": 14.0,
            "titre": "Lexpansion portugaise dans le monde XIV- XVIIIe siècle",
            "auteur_nom": "Luis Filipe Thomaz",
            "genre": "Gastronomia",
            "langue": "FR",
        }
    },
    {
        "9782367320670": {
            "prix": 26.0,
            "titre": "Aniki-Bóbó",
            "auteur_nom": "Manoel de Oliveira",
            "genre": "Cinema",
            "langue": "FR",
        }
    },
    {
        "9782296047334": {
            "prix": 16.5,
            "titre": "En lutte contre létat Salazariste",
            "auteur_nom": "Manuel Do Nascimento",
            "genre": "Gastronomia",
            "langue": "PT/FR",
        }
    },
    {
        "9782296052512": {
            "prix": 11.0,
            "titre": "La bataille de La Lys",
            "auteur_nom": "Manuel Do Nascimento",
            "genre": "Gastronomia",
            "langue": "PT/FR",
        }
    },
    {
        "9782343140858": {
            "prix": 20.5,
            "titre": "Les oubliés de la guerre des Flandres",
            "auteur_nom": "Manuel Do Nascimento",
            "genre": "Gastronomia",
            "langue": "FR",
        }
    },
    {
        "9782343024608": {
            "prix": 24.0,
            "titre": "Première Guerre Mondiale: soldats portugais",
            "auteur_nom": "Manuel Do Nascimento",
            "genre": "Gastronomia",
            "langue": "FR",
        }
    },
    {
        "9782367321233": {
            "prix": 17.0,
            "titre": "Histoires rêvérées",
            "auteur_nom": "Mia Couto",
            "genre": "BD",
            "langue": "FR",
        }
    },
    {
        "9782367320861": {
            "prix": 14.0,
            "titre": "La pluie ébahie",
            "auteur_nom": "Mia Couto",
            "genre": "Literatura",
            "langue": "FR",
        }
    },
    {
        "9782915540178": {
            "prix": 12.0,
            "titre": "Tombe, tombe au fond de leau",
            "auteur_nom": "Mia Couto",
            "genre": "BD",
            "langue": "PT",
        }
    },
    {
        "9782847432091": {
            "prix": 18.0,
            "titre": "Sabino ou les tribulations dun soldat portugais dans la Grande Guerre",
            "auteur_nom": "Nuno Gomes Garcia",
            "genre": "Ensino",
            "langue": "PT",
        }
    },
    {
        "9782264045812": {
            "prix": 12.0,
            "titre": "Train de nuit pour Lisbonne",
            "auteur_nom": "Pascal Mercier",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9782367321653": {
            "prix": 17.5,
            "titre": "Lisbonne ville ouverte",
            "auteur_nom": "Patrick Straumann",
            "genre": "Gastronomia",
            "langue": "FR",
        }
    },
    {
        "9526232412323345": {
            "prix": 6.0,
            "titre": "À Senoite",
            "auteur_nom": "Paulo Pego",
            "genre": "Poesia",
            "langue": "PT",
        }
    },
    {
        "9782367321530": {
            "prix": 22.0,
            "titre": "Mort sur le Tage",
            "auteur_nom": "Pedro Garcia Rosado",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9782260029205": {
            "prix": 20.0,
            "titre": "Les passants de Lisbonne",
            "auteur_nom": "Philippe Besson",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9781447299844": {
            "prix": 11.0,
            "titre": "Silence",
            "auteur_nom": "Shusaku Endo",
            "genre": "Ensino",
            "langue": "EN",
        }
    },
    {
        "55959595959592622": {
            "prix": 18.0,
            "titre": "Napoleão",
            "auteur_nom": "Teixeira de Pascoaes",
            "genre": "Gastronomia",
            "langue": "PT",
        }
    },
    {
        "9782367321844": {
            "prix": 19.0,
            "titre": "Lisbonne, balades dessinées",
            "auteur_nom": "Valérie Linder",
            "genre": "Turismo",
            "langue": "FR",
        }
    },
    {
        "9782367321332": {
            "prix": 22.0,
            "titre": "Autisme",
            "auteur_nom": "Valério Romao",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
    {
        "9782070302390": {
            "prix": 2.5,
            "titre": "Candide ou loptimisme",
            "auteur_nom": "Voltaire",
            "genre": "Ensino",
            "langue": "FR",
        }
    },
]


from core.models import Livre, ImageLivre, LivreItem
import os
import requests
from django.core.files import File
import datetime
import pytz


def create_product(isbn, titre, auteur_nom, genre_nom, langue_nom, prix=0):
    if prix == 0:
        livre = Livre.objects.create(
            isbn=isbn,
            titre=titre,
            auteur_nom=auteur_nom,
            genre_nom=genre_nom,
            langue_nom=langue_nom,
        )
        livre.save()
        b = LivreItem(livre=livre)
        b.save()
    else:
        livre = Livre.objects.create(
            isbn=isbn,
            titre=titre,
            auteur_nom=auteur_nom,
            genre_nom=genre_nom,
            langue_nom=langue_nom,
            prix=prix,
        )
        livre.save()
        b = LivreItem(livre=livre)
        b.save()


def update_books_into_postgres():
    for d in isbns:
        for key, value in d.items():
            if "prix" in d[key].keys():
                create_product(
                    isbn=key,
                    prix=d[key]["prix"],
                    titre=d[key]["titre"],
                    auteur_nom=d[key]["auteur_nom"],
                    genre_nom=d[key]["genre"],
                    langue_nom=d[key]["langue"],
                )
            else:
                create_product(
                    isbn=key,
                    titre=d[key]["titre"],
                    auteur_nom=d[key]["auteur_nom"],
                    genre_nom=d[key]["genre"],
                    langue_nom=d[key]["langue"],
                )


update_books_into_postgres()
